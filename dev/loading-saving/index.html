<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Loading and Saving Data · DirectDetections.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><script src="../../copy.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">DirectDetections.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../getting-started/">Getting Started</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../modelling/">Fit Astrometry</a></li><li><a class="tocitem" href="../pma/">Fit Astrometric Acceleration</a></li><li><a class="tocitem" href="../images/">Fit Images</a></li><li><a class="tocitem" href="../derived/">Derived Variables</a></li><li><a class="tocitem" href="../mass-photometry/">Connecting Mass with Photometry</a></li><li class="is-active"><a class="tocitem" href>Loading and Saving Data</a><ul class="internal"><li><a class="tocitem" href="#Loading-Observations"><span>Loading Observations</span></a></li><li><a class="tocitem" href="#Saving-Chains"><span>Saving Chains</span></a></li></ul></li></ul></li><li><span class="tocitem">Documentation</span><ul><li><a class="tocitem" href="../priors/">Priors</a></li><li><a class="tocitem" href="../samplers/">Samplers</a></li><li><a class="tocitem" href="../chains/">Chains</a></li><li><a class="tocitem" href="../kepler/">Kepler Solver</a></li><li><a class="tocitem" href="../api/">API</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Loading and Saving Data</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Loading and Saving Data</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/sefffal/DirectDetections.jl/blob/master/docs/src/loading-saving.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="loading-saving"><a class="docs-heading-anchor" href="#loading-saving">Loading and Saving Data</a><a id="loading-saving-1"></a><a class="docs-heading-anchor-permalink" href="#loading-saving" title="Permalink"></a></h1><h2 id="Loading-Observations"><a class="docs-heading-anchor" href="#Loading-Observations">Loading Observations</a><a id="Loading-Observations-1"></a><a class="docs-heading-anchor-permalink" href="#Loading-Observations" title="Permalink"></a></h2><p>For models with lots of data points, it becomes cumbersome to write all your data in your model script. Intead, you can load your observations (astrometry, proper motion anomaly, radial velocity, etc) from any Tables.jl compatible source. These could include a TypedTable, a DataFrame, a CSV file, an Arrow file, Excel, etc.</p><p>Here is an example of loading data from a CSV file:</p><pre><code class="language-julia hljs">using CSV
astrom = Astrometry(CSV.File(&quot;astrom.csv&quot;))
# Or equivalently
astrom = CSV.read(&quot;astrom.csv&quot;, Astrometry)</code></pre><p>The list of columns necessary for each type of observation are listed in the API documentation for e.g. Astrometry.</p><p>This works for other observation types too:</p><pre><code class="language-julia hljs">pma = CSV.read(&quot;pma.csv&quot;, PropMotionAnom)</code></pre><p>This pattern also allows you to load data directly from remote databases using any Tables.jl compatible library.</p><p>Once loaded, you can access the underlying table using e.g. <code>astrom.table</code>.</p><h2 id="Saving-Chains"><a class="docs-heading-anchor" href="#Saving-Chains">Saving Chains</a><a id="Saving-Chains-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-Chains" title="Permalink"></a></h2><p>The easiest way to save your chains is using the <code>JLD2</code> package. This saves the chains as well as the model for future reference, but is only compatible with the same Julia version. That is, chains saved with JLD2 in Julia 1.7 may not be loadable in Julia 1.8.</p><p>Saving chains with JLD2:</p><pre><code class="language-julia hljs">using JLD2
JLD2.jldsave(&quot;chains.jld2&quot;; chains)</code></pre><p>Other forward-compatible ways to save your chains are to convert them into a table using DataFrames:</p><pre><code class="language-julia hljs">using DataFrames
df = DataFrame(chains)</code></pre><p>which can then be saved to any Tables.jl compatible format:</p><pre><code class="language-julia hljs">using CSV
CSV.write(&quot;chains.csv&quot;, df)

using Arrow
Arrow.write(&quot;chains.arrow&quot;, df)</code></pre><p>Or a general Array which you can save in any format you wish:</p><pre><code class="language-julia hljs">arr = Array(chains)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../mass-photometry/">« Connecting Mass with Photometry</a><a class="docs-footer-nextpage" href="../priors/">Priors »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.12 on <span class="colophon-date" title="Wednesday 23 February 2022 20:59">Wednesday 23 February 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
