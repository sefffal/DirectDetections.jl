<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Chains · DirectDetections.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">DirectDetections.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../getting-started/">Getting Started</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../modelling/">Fit Astrometry</a></li><li><a class="tocitem" href="../pma/">Fit Astrometric Acceleration</a></li><li><a class="tocitem" href="../images/">Fit Images</a></li><li><a class="tocitem" href="../derived/">Derived Variables</a></li><li><a class="tocitem" href="../mass-photometry/">Connecting Mass with Photometry</a></li><li><a class="tocitem" href="../loading-saving/">Loading and Saving Data</a></li></ul></li><li><span class="tocitem">Documentation</span><ul><li><a class="tocitem" href="../priors/">Priors</a></li><li><a class="tocitem" href="../samplers/">Samplers</a></li><li class="is-active"><a class="tocitem" href>Chains</a><ul class="internal"><li><a class="tocitem" href="#Diagnostics"><span>Diagnostics</span></a></li><li><a class="tocitem" href="#Exporting-Chains"><span>Exporting Chains</span></a></li></ul></li><li><a class="tocitem" href="../kepler/">Kepler Solver</a></li><li><a class="tocitem" href="../api/">API</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Documentation</a></li><li class="is-active"><a href>Chains</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Chains</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/sefffal/DirectDetections.jl/blob/master/docs/src/chains.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="chains"><a class="docs-heading-anchor" href="#chains">Chains</a><a id="chains-1"></a><a class="docs-heading-anchor-permalink" href="#chains" title="Permalink"></a></h1><p>This page describes the format of the Monte Carlo chains created by DirectDetections.jl</p><p>The output of the samplers in DirectDetections is an MCMCChains.Chains object</p><p>A column will be present for each variable in your model, both defined in the Priors blocks or as Derived variables. </p><p>Variables defined for the System as a whole can be accessed directly. For example:</p><pre><code class="language-julia hljs">chain[&quot;μ&quot;]</code></pre><p>This will return an array of μ values from the posterior. The format is a matrix of N-samples by N-walkers.</p><p>Variables defined for an individual Planet are grouped according to the standard MCMCChains format. For example:</p><pre><code class="language-julia hljs">chain[&quot;b[a]&quot;]</code></pre><p>This returns an array of semi-major axis values (<code>a</code>) for the planet <code>b</code> sampled from the posterior.</p><h2 id="Diagnostics"><a class="docs-heading-anchor" href="#Diagnostics">Diagnostics</a><a id="Diagnostics-1"></a><a class="docs-heading-anchor-permalink" href="#Diagnostics" title="Permalink"></a></h2><p>Printing the chains will display a number of useful summaries for each quantity, like the mean, 0.25, 0.5, and 0.75 quantiles, and convergence metrics. See MCMCChains documentation for more details.</p><h2 id="Exporting-Chains"><a class="docs-heading-anchor" href="#Exporting-Chains">Exporting Chains</a><a id="Exporting-Chains-1"></a><a class="docs-heading-anchor-permalink" href="#Exporting-Chains" title="Permalink"></a></h2><p>There are two useful ways to export chains. One is with the JLD2 library which preserves all the information and structure of the chain (but is only easy to open again in Julia) and the other is converting them to tables.</p><h3 id="Using-JLD2"><a class="docs-heading-anchor" href="#Using-JLD2">Using JLD2</a><a id="Using-JLD2-1"></a><a class="docs-heading-anchor-permalink" href="#Using-JLD2" title="Permalink"></a></h3><p>Using the JLD2 library, you can save your chain like so:</p><pre><code class="language-julia hljs">using JLD2
@save &quot;mychain.jld2&quot; chain</code></pre><p>And open it again (if using the same version of Julia and DirectDetections):</p><pre><code class="language-julia hljs">@load &quot;mychain.jld2&quot;</code></pre><h3 id="As-a-table"><a class="docs-heading-anchor" href="#As-a-table">As a table</a><a id="As-a-table-1"></a><a class="docs-heading-anchor-permalink" href="#As-a-table" title="Permalink"></a></h3><p>To convert your chains into a table, first use the DataFrames.jl library:</p><pre><code class="language-julia hljs">using DataFrames
df = DataFrame(chain)</code></pre><p>You can then use a wide variety of Tables.jl source or sink libraries to persist your data to a file or database. The easiest is probably CSV.jl:</p><pre><code class="language-julia hljs">CSV.write(&quot;mychain.csv&quot;, df)</code></pre><p>Other useful formats could be Arrow.jl or SQLite.jl which may be more efficient. In these formats, the data can be archived and imported easily into other programs; however, there is not yet an automatic way to return the data into the <code>MCMCChains.Chains</code> format it originated in.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../samplers/">« Samplers</a><a class="docs-footer-nextpage" href="../kepler/">Kepler Solver »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.13 on <span class="colophon-date" title="Tuesday 1 March 2022 18:36">Tuesday 1 March 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
